import{w as K}from"./with-props-BQ_hK6-e.js";import{r as s,g as I,j as e,f as T,N as $}from"./chunk-LSOULM7L-DLna4NcF.js";import{u as _}from"./useWinnerRecords-6gbEoZoV.js";import{K as z}from"./KopikoBlancaLogoTrimmed-Bhr8bTkX.js";import{F as E,f as R}from"./main-D2ctIrR_.js";import{u as G}from"./index.esm-DY7BLQcA.js";import{b as k}from"./getPaginatedParticipants-9gK027T_.js";import{u as S}from"./AuthContext-BgpTDzSM.js";import"./index-NOZ-zHIz.js";import"./useIndexedDB-DB1MSR73.js";const D="/assets/KopikoWoodenTableBG-BqBG_8VQ.jpg",F="/assets/KopikoProducts-DHqi_B1c.png",M="/assets/KopikoCoffeeBeansSack-B4LNV_P2.png",W="/assets/KopikoBrownBeans-ypxHCXIz.jpg",U="/assets/Kopiko-CA-wp1cX.svg";/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const H={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]};function V({setErrorMessage:i}){const[n,l]=s.useState(!1),[c,o]=s.useState("Login with Google"),[p,u]=s.useState(!1),v=I(),g=S(),y=G({onSuccess:async f=>{var w,x;try{o("Authenticating...");const{access_token:m}=f,h="/api",t=await k.get("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:`Bearer ${m}`}}),d=await k.post(h+"/auth/google/callback",{email:t.data.email,first_name:t.data.given_name,last_name:t.data.family_name,sub:t.data.sub,picture:t.data.picture});g==null||g.login(d.data.user,d.data.token),o("Login Successful âœ…"),v("/main")}catch(m){console.error("Login error:",m);const h=((x=(w=m.response)==null?void 0:w.data)==null?void 0:x.error)||"Email or Password don't match any account";i(h);let t=10;o(`Try Again in ${t} seconds`);const d=setInterval(()=>{t--,t>0?o(`Try Again in ${t} seconds`):clearInterval(d)},1e3),L=setTimeout(()=>{u(!1),o("Login with Email"),i(""),clearTimeout(L)},1e4)}finally{l(!1)}},onError:f=>{console.error("Google Login Error",f),o("Something went wrong âŒ"),l(!1)}}),N=()=>{l(!0),o("Logging in..."),y()};return e.jsx("button",{onClick:N,type:"button",className:"bg-[#7e061a] hover:bg-[#7e061acb] text-white w-[250px] py-2 px-2.5 rounded-xl cursor-pointer gap-3 flex justify-center items-center",children:e.jsxs("div",{className:`button-content flex gap-2 justify-center items-center ${n?"animate-pulse":""}`,children:[e.jsx(E,{icon:H}),e.jsx("span",{children:c})]})})}function q({setErrorMessage:i}){const[n,l]=s.useState(""),[c,o]=s.useState(""),[p,u]=s.useState("Login with Email"),[v,g]=s.useState(!1),[y,N]=s.useState(!1),[f,w]=s.useState(!1),[x,m]=s.useState(!1),h=I(),t=S(),d="/api",L=a=>{const r=a.target.value;l(r),N(!!r)},P=a=>{const r=a.target.value;o(r),w(!!r)},B=async()=>{var a,r;if(!(!y||!f)&&!x){g(!0),m(!0),u("Logging in...");try{const b=await k.post(d+"/auth/login",{email:n,password:c});t==null||t.login(b.data.user,b.data.token),u("Login Successful"),h("/main")}catch(b){console.error("Email login failed:",b),(r=(a=b.response)==null?void 0:a.data)==null||r.error,i("Email or Password don't match any account");let j=10;u(`Try Again in ${j} seconds`);const C=setInterval(()=>{j--,j>0?u(`Try Again in ${j} seconds`):clearInterval(C)},1e3),A=setTimeout(()=>{m(!1),u("Login with Email"),i(""),clearTimeout(A)},1e4)}finally{g(!1)}}};return e.jsxs("div",{className:"form flex-col flex gap-3 items-center justify-center w-full mt-6",children:[e.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:a=>L(a),className:"bg-white w-[250px] py-2 px-2.5 rounded-xl"}),e.jsx("input",{type:"password",placeholder:"Password",value:c,onChange:a=>P(a),className:"bg-white w-[250px] py-2 px-2.5 rounded-xl"}),e.jsx("button",{onClick:B,type:"button",className:` text-[white] w-[250px] py-2 px-2.5 rounded-xl ${x?"cursor-not-allowed bg-emerald-600":"cursor-pointer hover:bg-[#df0429c4] bg-[#df0427] "}`,children:e.jsxs("div",{className:`button-content flex gap-2 justify-center items-center ${v?"animate-pulse":""}`,children:[e.jsx(E,{icon:R}),e.jsx("span",{children:p})]})})]})}const X=()=>{const[i,n]=s.useState(""),[l,c]=s.useState(""),[o,p]=s.useState("");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative z-10 w-full h-full py-5",children:[e.jsx("div",{className:"portal-label font-[Montserrat] text-xl uppercase w-full text-center font-bold text-white bg-[#000000a9] py-2",children:"Login Portal"}),e.jsx("div",{className:"kopikoblanca-logo w-full  mb-3 -mt-2 flex items-center justify-center",children:e.jsx("img",{src:z,alt:"",className:"h-[100px]"})}),e.jsx("div",{className:"portal-label font-[Montserrat] text-lg uppercase w-full text-center font-bold text-white",children:"National Raffle Draw System"}),e.jsx(q,{setErrorMessage:p}),e.jsxs("div",{className:"form flex flex-col gap-2 items-center justify-center w-full mt-2",children:[e.jsx("div",{className:"or text-white",children:"-- or --"}),e.jsx(V,{setErrorMessage:p})]}),o&&e.jsx("div",{className:"error-message absolute bottom-0 bg-[#880202ce] text-white text-sm min-w-[250px] p-4 left-1/2 -translate-y-[10px] -translate-x-1/2 rounded-2xl text-center animate-pulse",children:o})]})})};function Q(){const[i,n]=_("spa_status",{defaultValue:!1});return e.jsxs("main",{className:"flex items-center justify-start w-screen h-screen bg-cover bg-left relative",style:{backgroundImage:`url(${D})`},children:[e.jsxs("div",{className:"left  h-full flex flex-col justify-center items-center relative w-3/5",children:[e.jsx("div",{className:"kopiko-products absolute bottom-0 bg-contain bg-bottom z-[5] w-[75%] h-full bg-no-repeat",style:{backgroundImage:`url(${F})`}}),e.jsxs("div",{className:"kopiko-brand flex flex-col justify-center w-full items-center -mt-[150px] z-[5] ",children:[e.jsx("div",{className:"welcome text-5xl font-bold font-[Montserrat] -mb-[80px] -translate-x-[30px] text-white rotate-[-8deg] ",children:"Welcome to"}),e.jsx("div",{className:"kopiko-logo w-full flex justify-center items-center",children:e.jsx("img",{src:U,alt:"",className:"w-[550px]"})}),e.jsx("div",{className:"welcome text-6xl font-bold font-[Montserrat] -mt-[50px] rotate-[-8deg] uppercase text-[#ffffff]",children:"Philippines"})]}),e.jsx("div",{className:"absolute bg-gradient-to-r from-[#301700] to-transparent w-full h-full top-0 z-[1]"})]}),e.jsx("div",{className:"right h-full justify-center items-center flex w-2/5",children:e.jsxs("div",{className:"login-box w-[450px] h-[550px] rounded-4xl relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-90 z-0",style:{backgroundImage:`url(${W})`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#00000098] to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#77777798] via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-contain bg-bottom opacity-90 z-0 bg-no-repeat",style:{backgroundImage:`url(${M})`}}),e.jsx(X,{})]})})]})}function le({}){return[{title:"KBNRDS | Welcome Page"},{name:"description",content:"Welcome to React Router!"}]}const re=K(function(){const{user:n}=S(),l=T();console.log("ðŸŸ¢ðŸŸ¢ðŸŸ¢ðŸŸ¢ ACTIVE USER: ",n);const c=l.pathname==="/";return n&&c?e.jsx($,{to:"/main",replace:!0}):e.jsx(Q,{})});export{re as default,le as meta};
