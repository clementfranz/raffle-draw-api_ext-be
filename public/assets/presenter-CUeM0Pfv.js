import{w as V}from"./with-props-BQ_hK6-e.js";import{r as o,j as e,f as P}from"./chunk-LSOULM7L-DLna4NcF.js";import{u as a,a as R}from"./useWinnerRecords-6gbEoZoV.js";import{K as N}from"./KopikoBlancaLogoTrimmed-Bhr8bTkX.js";import{g as _}from"./useIndexedDB-DB1MSR73.js";const T=()=>{const[t,l]=a("regionalStats",{defaultValue:null}),[s,n]=o.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-emerald-400 h-[200px] w-full",children:s?e.jsx("div",{className:"flex justify-center items-center text-5xl h-full font-[Montserrat]",children:e.jsxs("div",{className:"center-div flex gap-5 justify-center items-center",children:[e.jsx("div",{className:"animate-spin bg-emerald-200 h-[80px] w-[80px] aspect-square rounded-full relative",children:e.jsx("span",{className:"bg-emerald-600 h-[15px] w-[15px] block rounded-full absolute top-1/2 left-[5px]"})}),e.jsx("span",{children:"Loading Regional Statistics..."})]})}):e.jsx("div",{className:"flex p-4 w-full h-full justify-between gap-4",children:t==null?void 0:t.regions.map((d,r)=>e.jsxs("div",{className:"card bg-emerald-700 rounded-2xl w-full flex flex-col justify-center  text-white p-5",children:[e.jsx("div",{className:"region text-2xl capitalize text-center grow flex justify-center items-center",children:d.location}),e.jsx("div",{className:"count text-2xl font-bold bg-amber-200 text-black rounded-xl h-[50px] mb-4 w-full flex justify-center items-center",children:d.count.toLocaleString()})]},r))})}),e.jsxs("div",{className:"mt-8 h-[10vh] flex w-full text-5xl items-center gap-8",children:[e.jsxs("div",{className:"total h-full bg-emerald-950 flex items-center font-[Montserrat] px-8 gap-4 w-full justify-center",children:[e.jsx("span",{className:"text-emerald-300",children:"Total Participants: "}),e.jsx("span",{className:"text-amber-300 text-shadow-lg text-shadow-black text-6xl font-bold",children:t==null?void 0:t.totalParticipants.toLocaleString()})]}),e.jsxs("div",{className:"total h-full bg-emerald-950 flex items-center font-[Montserrat] px-8 gap-4 w-full justify-center",children:[e.jsx("span",{className:"text-emerald-300",children:"Daily Average: "}),e.jsx("span",{className:"text-amber-300 text-shadow-lg text-shadow-black text-6xl font-bold",children:t==null?void 0:t.dailyAverage.toLocaleString()})]})]})]})};function z(t,l){const s=P();o.useEffect(()=>{if(s.pathname===t)return l.forEach(n=>document.body.classList.add(n)),()=>{l.forEach(n=>document.body.classList.remove(n))}},[s.pathname,t,l])}const y=()=>{const[t,l]=a("presentingView"),[s,n]=a("presentingStatus"),[d,r]=o.useState(!1),[i,m]=a("isRevealedStart"),u=()=>{r(!0),c(),document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.webkitRequestFullscreen?document.webkitRequestFullscreen():document.msRequestFullscreen&&document.msRequestFullscreen()},[p,h]=a("transitionActive",{defaultValue:!1}),f=()=>{h(!0)},x=g=>{if(t!==g){f();const w=setTimeout(()=>{l(g),clearTimeout(w)},3e3)}},c=()=>{x("screen-saver")};return o.useEffect(()=>{const g=()=>{n("not-presenting")};return window.addEventListener("beforeunload",g),()=>{window.removeEventListener("beforeunload",g),m(!1)}},[]),o.useEffect(()=>{s==="not-presenting"&&window.close()},[s]),e.jsx("div",{className:"bg-gray-800 w-full h-full flex justify-center items-center",children:e.jsxs("div",{className:"default-screensaver-inner flex flex-col items-center justify-center gap-4",children:[e.jsx("img",{src:N,alt:"Kopiko Blanca Logo",className:"h-[250px]"}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Kopiko Blanca Raffle"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Welcome to the Raffle!"}),e.jsx("p",{className:"text-lg text-gray-300",children:"Please wait..."}),e.jsx("button",{className:"p-2 px-4 bg-gray-950 text-white rounded-2xl cursor-pointer hover:bg-gray-900",onClick:u,children:"Activate Presentation"})]})})},A="_participantsTable_52x7m_1",B={participantsTable:A},E=()=>{const t=P(),[l,s]=a("withParticipantsData",{defaultValue:!1}),[n,d]=o.useState(null),[r,i]=o.useState(!1),[m,u]=o.useState(1),[p,h]=o.useState(250),f=()=>{const c=new URLSearchParams(t.search),g=parseInt(c.get("page")||"1",10),w=parseInt(c.get("pageSize")||"250",10);u(g),h(w)},x=async(c,g)=>{try{const w=await _("WEEK-2025-06",c,g);d(w),s(!0)}catch(w){console.error("Error fetching data:",w),d([]),s(!1)}finally{i(!1)}};return o.useEffect(()=>{f()},[t.search]),o.useEffect(()=>{i(!0),x(1,2500)},[]),e.jsx(e.Fragment,{children:n&&n.length>0&&!r?e.jsx("div",{className:`present-participants-table grow overflow-y-scroll h-full w-full text-black ${B.participantsTable}`,children:e.jsxs("table",{className:"min-w-full table-fixed border-separate border-spacing-0 ",children:[e.jsx("thead",{className:"bg-emerald-900 text-white sticky top-0 z-10 text-8xl!",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left border-b",children:"No.:"}),e.jsx("th",{className:"p-2 text-left border-b",children:"Participant's Name"}),e.jsx("th",{className:"p-2 text-left border-b",children:"Code"}),e.jsx("th",{className:"p-2 text-left border-b",children:"Location"})]})}),e.jsx("tbody",{className:"animate-slideUpX",children:n==null?void 0:n.map((c,g)=>e.jsxs("tr",{children:[e.jsxs("td",{children:["#",c.id_entry.toString().padStart(8,"0").replace(/(\d{2})(\d{3})(\d{3})/,"$1-$2-$3")]}),e.jsx("td",{className:"w-1/2",children:c.full_name}),e.jsx("td",{className:"text-base font-bold",children:c.raffle_code}),e.jsx("td",{children:c.regional_location})]},`participant-${c.id_entry}-${g}`))})]})}):e.jsx("div",{className:"participants-table grow overflow-y-auto h-[500px] drop-shadow-none flex bg-gray-300 justify-center items-center text-center",children:r?e.jsxs("div",{className:"flex flex-col justify-center gap-4 items-center",children:[e.jsx("div",{className:"animate-spin bg-gray-200 h-[50px] w-[50px] aspect-square rounded-full relative",children:e.jsx("span",{className:"bg-gray-600 h-[10px] w-[10px] block rounded-full absolute top-1/2 left-[5px]"})}),"Loading New Data. Please wait..."]}):e.jsxs(e.Fragment,{children:["No data available... ",e.jsx("br",{}),"Upload new data to continue"]})})})},W=()=>e.jsxs("div",{className:"bg-emerald-800 w-full h-screen overflow-hidden flex justify-center items-center flex-col",children:[e.jsx("div",{className:"big-title text-amber-300 text-shadow-lg text-shadow-black text-7xl font-[Montserrat] font-bold pt-8",children:"Participants Overview"}),e.jsx("div",{className:"table-shell h-0 grow p-10 w-full",children:e.jsx(E,{})}),e.jsx("div",{className:"regional-stats p-10 w-full pt-0",children:e.jsx(T,{})})]}),L="_bulbOn_jpimu_1",M="_bulbOff_jpimu_11",S={bulbOn:L,bulbOff:M},j=({boxUnit:t,turnOn:l})=>e.jsx("div",{className:"blinker-bulb",children:e.jsx("div",{className:"bulb-case bg-linear-to-br from-gray-500 to-gray-800 aspect-square rounded-full justify-center items-center flex transition-all duration-500",style:{width:`${t*.8}px`},children:e.jsx("div",{className:`bulb-glass w-[70%]  aspect-square rounded-full relative overflow-hidden transition-all duration-200 ${l?S.bulbOn:S.bulbOff}`})})}),C=({boxUnit:t,nthColumn:l})=>{const[s,n]=o.useState(!1),[d,r]=o.useState(!1),[i,m]=a("revealWinner",{defaultValue:!1}),[u]=a("enableSlotMachineAnimation");let p;const h=()=>{l%2!==0?(n(!0),r(!1)):(n(!1),r(!0)),(()=>{p=setInterval(()=>{n(c=>!c),r(c=>!c)},1e3)})()},f=()=>{clearInterval(p)};return o.useEffect(()=>(u?h():f(),()=>{f()}),[l,u]),e.jsxs("div",{style:{width:`${t+4}px`},className:`bg-[#039645] odd:bg-[#f3eb58] flex flex-col justify-between items-center py-4 ${i&&"scale-110"}`,children:[e.jsxs("div",{className:"blinkers-top flex flex-col transition-all duration-500 ",style:{gap:`${t*.5}px`,transform:`translateY(${i?"-"+t*1.5+"px":"0px"})`},children:[e.jsx(j,{boxUnit:t,turnOn:s}),e.jsx(j,{boxUnit:t,turnOn:d})]}),e.jsxs("div",{className:"blinkers-top flex flex-col transition-all duration-500 ",style:{gap:`${t*.5}px`,transform:`translateY(${i?t*1.5+"px":"0px"})`},children:[e.jsx(j,{boxUnit:t,turnOn:s}),e.jsx(j,{boxUnit:t,turnOn:d})]})]})},O="_slotMachineColumns_1a5ah_1",D="_backgroundShell_1a5ah_13",$={slotMachineColumns:O,backgroundShell:D},I=({boxUnit:t})=>{const[l]=a("enableSlotMachineAnimation"),s=t*12+4*12;return e.jsx("div",{className:"absolute top-0 left-0 w-full z-[10] ",children:e.jsxs("div",{className:`background-shell w-full flex justify-center relative ${$.backgroundShell} ${l&&"raffle-bg-animation"}`,children:[e.jsx("div",{className:`slot-machine-columns h-screen flex z-[20] ${$.slotMachineColumns} `,style:{width:`${s}px`},children:Array.from({length:12},(d,r)=>e.jsx(C,{boxUnit:t,nthColumn:r+1},r))}),e.jsx("div",{className:"shadow-overlay absolute bg-linear-to-b from-[#00000000] to-[black] h-full w-full"})]})})},b="ABCDEFGHIJKLMNOPQRSTUVWXYZ&$?#@0123456789",k=b.indexOf("?"),K=({boxUnit:t,codeChar:l,slotCodeStatus:s,nthChar:n})=>{const[d,r]=o.useState(k),[i]=a("enableSlotMachineAnimation");return o.useEffect(()=>{s==="idle"?r(k):s==="roll"&&r(b.indexOf(l)+b.length+b.length)},[l,s]),e.jsxs("div",{className:"slot-reel-window h-full flex justify-center items-center relative ",style:{width:`${t}px`},children:[e.jsx("div",{className:"reel-window-inset-shadow absolute w-full h-full z-[37]",style:{background:"linear-gradient(to bottom, black 0%, rgba(0,0,0,0.8) 20%, transparent 40%, transparent 60%, rgba(0,0,0,0.8) 80%, black 100%)"}}),e.jsx("div",{className:`reel-roll absolute flex flex-col left-0 w-full ${i&&"transition-all"} ease-in-out duration-200`,style:{top:`-${t*(d-.75)}px`,transitionDelay:`${s==="roll"?n*150:0}ms`},children:e.jsxs("div",{className:"reel-tape bg-pink text-[#a70000] flex flex-col bg-[white]",style:{width:`${t}px`},children:[b.split("").map((m,u)=>e.jsx("div",{className:"w-full aspect-square bg-linear-to-br from-[#636363a9] to-[#00000000] flex justify-center items-center p-0 text-center h-full",children:m},u)),b.split("").map((m,u)=>e.jsx("div",{className:"w-full aspect-square bg-linear-to-br from-[#636363a9] to-[#00000000] flex justify-center items-center p-0 text-center h-full",children:m},u)),b.split("").map((m,u)=>e.jsx("div",{className:"w-full aspect-square bg-linear-to-br from-[#636363a9] to-[#00000000] flex justify-center items-center p-0 text-center h-full",children:m},u)),b.split("").map((m,u)=>e.jsx("div",{className:"w-full aspect-square bg-linear-to-br from-[#636363a9] to-[#00000000] flex justify-center items-center p-0 text-center h-full",children:m},u))]})})]})},q=({boxUnit:t})=>{const[l,s]=a("slotCode",{defaultValue:"KOPIKBLNCA"}),[n]=a("showWinnerNth",{defaultValue:0}),[d]=a("enableSlotMachineAnimation"),[r,i]=a("slotCodeStatus",{defaultValue:"idle"}),[m,u]=a("revealWinner",{defaultValue:!1}),[p]=a("winners"),{getWinnerByIndex:h}=R(),f=h(n);return o.useEffect(()=>{s((f==null?void 0:f.raffle_code)||"KPIKOBLNCA")},[p,n,f]),e.jsx("div",{className:`absolute z-[30]  bg-pink-300 origin-center  ${d&&"transition-all"} duration-500 ${m&&"-translate-y-1/3 scale-75"}`,style:{width:`${t*12+12*4+t*.8}px`,height:`${t*3+2*(t*.4)}px`,padding:`${t*.4}px`,borderRadius:`${t*.4}px`,background:"linear-gradient(to bottom right, #d3d3d3, #555555)"},children:e.jsxs("div",{className:"slot-machine-wrapper relative w-full h-full block overflow-hidden",style:{background:"orange",borderRadius:"16px"},children:[e.jsx("div",{className:"shadow-holder slot-machine-inner absolute top-0 left-0 w-full h-full z-[50] "}),e.jsx("div",{className:"slot-machine-inner during-roll opacity-0 absolute top-0",children:"During Roll"}),e.jsx("div",{className:"slot-machine-inner pre-roll bg-[black] w-full h-full",children:e.jsx("div",{className:"reels-shell flex w-full justify-between h-full font-[Ultra]",style:{fontSize:`${t*.8}px`},children:l&&l.split("").map((x,c)=>e.jsx(K,{nthChar:c,boxUnit:t*12/10,codeChar:x,slotCodeStatus:r},c))})}),e.jsx("div",{className:"slot-machine-inner post-roll opacity-0 absolute top-0",children:"Post Roll"})]})})},F=({boxUnit:t})=>{const[l]=a("revealWinner"),[s]=a("enableSlotMachineAnimation"),[n]=a("showWinnerNth",{defaultValue:0});return e.jsx("div",{className:`absolute z-[40] font-[Montserrat] font-bold uppercase top-0 congratulatory-text ${s&&"transition-all"} duration-500  ${l?"delay-500":"-translate-y-full"}`,style:{top:`${l?t*.3:0}px`,fontSize:`${t*1.2}px`,display:"flex",gap:"0.1em"},children:n===0?"Congratulations!".split("").map((r,i)=>e.jsx("span",{className:`${s&&"letter"}`,style:{animationDelay:`${i*.1}s, 0s`},children:r},i)):n===1?e.jsx("span",{style:{fontSize:`${t*1}px`},children:"First Backup Winner"}):n===2?e.jsx("span",{style:{fontSize:`${t*1}px`},children:"Second Backup Winner"}):e.jsx("span",{style:{fontSize:`${t*1}px`},children:"Third Backup Winner"})})},H=({boxUnit:t})=>{const[l]=a("revealWinner"),[s]=a("enableSlotMachineAnimation"),[n]=a("showWinnerNth",{defaultValue:0}),[d]=a("winners"),{getWinnerByIndex:r}=R(),i=r(n);return e.jsx("div",{className:` absolute z-[45] h-1/2 bottom-0 flex justify-center items-center flex-col ${s&&"transition-all"} duration-500  ${l?"delay-500 duration-[800ms]":"translate-y-full "}`,children:e.jsxs("div",{className:`participant-info ${s&&"flowing-gradient"} rounded-3xl overflow-hidden`,children:[e.jsx("div",{className:"participant-name font-['Sour_Gummy'] font-bold text-center",style:{padding:`${t*.2}px ${t*.6}px`,fontSize:`${t*.9}px`},children:i&&e.jsxs(e.Fragment,{children:[i.full_name,console.log("Winner Chosen: [cleaned name]",i.full_name)]})}),e.jsx("div",{className:"participant-location w-full text-center bg-white uppercase font-[Montserrat] font-bold",style:{padding:`${t*.2}px`,fontSize:`${t*.6}px`},children:i==null?void 0:i.regional_location})]})})},Y=()=>{const[t,l]=o.useState(50),[s,n]=a("showRaffleView",{defaultValue:!1}),[d]=a("winners"),[r,i]=a("slotCodeStatus",{defaultValue:"idle"}),[m,u]=a("revealWinner",{defaultValue:!1}),[p,h]=a("enableSlotMachineAnimation",{defaultValue:!1}),f=()=>{const c=window.innerHeight/9;l(c)};return o.useEffect(()=>{f(),u(!1),i("idle"),h(!1);const x=setTimeout(()=>{h(!0)},3e3);return window.addEventListener("resize",f),()=>{clearInterval(x),window.removeEventListener("resize",f)}},[]),e.jsx("div",{className:`raffle-view-shell w-full h-screen absolute top-0 flex ${s?"z-[40] opacity-100":"-z-[10] opacity-0"}`,children:e.jsxs("div",{className:"bg-amber-800 w-full h-screen justify-center items-center relative flex overflow-hidden ",children:[e.jsx(q,{boxUnit:t}),e.jsx(F,{boxUnit:t}),e.jsx(H,{boxUnit:t}),e.jsx(I,{boxUnit:t})]})})},G="/assets/KopikoBlancaAd-BznNJiZM.webm",J=()=>e.jsxs("div",{className:"bg-gray-600 h-full w-full flex justify-center items-center",children:[e.jsxs("div",{className:"brand-logo-shell z-20 flex flex-col justify-between items-center gap-10 opacity-90",children:[e.jsx("img",{src:N,alt:""}),e.jsx("span",{className:"text-7xl text-center w-full font-[Montserrat] font-bold text-[#e61630] text-shadow-md text-shadow-black",children:"Kopiko Blanca Raffle Draw"})]}),e.jsxs("div",{className:"video-background w-full h-screen absolute top-0 left-0 select-none",children:[e.jsx("div",{className:"bg-overlay absolute h-screen w-full  bg-linear-to-b from-[#fdf2ba00] via-[#fdf2bac9] to-[#fdf2ba] opacity-75"}),e.jsx("video",{src:G,autoPlay:!0,muted:!0,loop:!0,className:"h-full w-full object-cover"})]})]}),X="_imageLogoShell_zknee_35",Z="_topPart_zknee_81",Q="_bottomPart_zknee_149",v={imageLogoShell:X,topPart:Z,bottomPart:Q},U="/assets/KpcTransitionBottomPart-Bk3zrj2T.png",ee=()=>{const[t,l]=o.useState(!1),[s,n]=o.useState(!0),[d,r]=o.useState(!1),[i]=a("presentingView"),[m,u]=a("transitionActive"),p=o.useRef(null),h=()=>{n(!0),l(!1),setTimeout(()=>{u(!1)},1500)},f=()=>{l(!0),n(!1)};return o.useEffect(()=>{if(m&&p.current!==i){const x=setTimeout(h,1500);return p.current=i,()=>{clearTimeout(x)}}},[i,s]),o.useEffect(()=>{const x=setTimeout(f,500);return()=>{clearTimeout(x)}},[]),e.jsxs("div",{className:"presview-transition w-screen h-screen overflow-hidden flex flex-col relative select-none",children:[e.jsx("div",{className:`top-part bg-green-500 w-full h-full absolute z-[51] transition-all duration-1000 ${v.topPart} ${s?"-translate-y-full":"delay-400"}`}),e.jsx("div",{className:`bottom-part bg-transparent w-full h-full absolute z-[52] bottom-0 scale-110 transition-all duration-1000 ${v.bottomPart} ${s?"translate-y-full":"delay-400"}`,children:e.jsx("div",{className:"bg-holder w-screen h-full bg-no-repeat bg-cover bg-center",style:{backgroundImage:`url(${U})`}})}),e.jsx("div",{className:`brand-logo absolute z-[53] h-full w-full top-0 flex flex-col justify-center items-center transition-all duration-700  ${s?"-translate-y-full delay-500":""}`,children:e.jsx("div",{className:`aspect-square flex justify-center items-center p-20  rounded-full drop-shadow-gray-700 drop-shadow-lg transition-all duration-500 ${v.imageLogoShell} ${s?"h-full delay-700":"h-3/4"}`,children:e.jsx("img",{src:N,alt:"Kopiko Blanca Logo"})})}),d&&e.jsx("div",{className:"debug-bar absolute bg-pink-400 bottom-0 right-0 w-[150px] h-[50px] z-[60] flex gap-4 justify-center items-center",children:s?e.jsx("button",{className:"bg-orange-300 hover:bg-orange-400 p-2 rounded-md cursor-pointer",onClick:f,children:"Close"}):e.jsx("button",{className:"bg-orange-300 hover:bg-orange-400 p-2 rounded-md cursor-pointer",onClick:h,children:"Open"})})]})};function re({}){return[{title:"KBNRDS | Presenter"},{name:"description",content:"Welcome to React Router!"}]}const ie=V(function(){z("/presenter",["bg-gray-800!","h-screen!","w-screen!","flex!","transition-all","duration-500"]);const[l,s]=a("presentingView"),[n,d]=a("lockViewCards"),[r,i]=a("transitionActive"),[m,u]=a("showRaffleView",{defaultValue:!1});o.useEffect(()=>{l!=="raffle-view"&&u(!1)},[l]),o.useEffect(()=>{d(!!r)},[r]),o.useEffect(()=>{s("intro"),i(!1);const c=()=>{h("not-presenting")};return window.addEventListener("beforeunload",c),()=>{window.removeEventListener("beforeunload",c),x(!1)}},[]);const[p,h]=a("presentingStatus"),[f,x]=a("isRevealedStart");return e.jsxs("div",{className:"w-screen h-screen relative",children:[(()=>{switch(l){case"intro":return e.jsx(y,{});case"screen-saver":return e.jsx(J,{});case"overview":return e.jsx(W,{});case"raffle-draw":u(!0);default:return e.jsx(y,{})}})(),r&&e.jsx("div",{className:"transition-shell absolute top-0",children:e.jsx(ee,{})}),e.jsx(Y,{})]})});export{ie as default,re as meta};
